<html>
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <title>Mike's Craft Beer API</title>
</head>
<body>
<div class="container">
  <div class="content d-flex justify-content-center align-items-center">
    <h1>Mike's Craft Beer API</h1>
  </div>
  <hr/>
  <div>
    <p class="lead">A simple API that can be used to return information on craft beers, information is scraped from <a href="http://untappd.com">Untappd.</a> </p>
  </div>
  <hr/>
  <div>
    <h2>Usage</h2>
    <hr/>
  </div>
  <div class="card">
    <h4>Retrieve all beers</h4>
    <p>Request URL: <em>https://mikes-beer-api.herokuapp.com/api/v1/beers</em></p>
  </div>
  <div class="card mt-3">
    <h4>Retrieve specific beer by ID</h4>
    <p>Request URL: <em>https://mikes-beer-api.herokuapp.com/api/v1/beers/#ID</em></p>
  </div>
  <div class="card mt-3">
    <h4>Retrieve random beer</h4>
    <p>Request URL: <em>https://mikes-beer-api.herokuapp.com/api/v1/random</em></p>
  </div>
  <div class="card mt-3">
    <h4>Search all beers (searches name, brewery, description and style)</h4>
    <p>Request URL: <em>https://mikes-beer-api.herokuapp.com/api/v1/search?q=#Search terms</em></p>
    <em>Can also add maxABV and minABV (maxABV=10) to filter by that</em>
  </div>
  <div class="d-flex mt-3">
    <input type="text" class="form-input w-100" id="api-test" value="https://mikes-beer-api.herokuapp.com/api/v1/">
    <button class="form-control w-50" id="api-button">Try</button>
  </div>
  <div class="border w-100 h-50" id="api-display"></div>
</div>
<script>
  const button = document.querySelector('#api-button');

  function getApi(e) {
    const display = document.querySelector('#api-display');
    const request = document.querySelector('#api-test').value;
    display.innerText = "Fetching result...";
    fetch("http://localhost:3000/api/v1/beers", {mode: 'no-cors'})
      .then(data => data.json())
      .then(data => {
        display.innerHTML = "<pre class='h-100'>" + JSON.stringify(data, undefined, 2) + "</pre>";
      });
  }

  button.addEventListener('click', getApi);
</script>
</body>
</html>
